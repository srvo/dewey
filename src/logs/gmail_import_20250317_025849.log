2025-03-17 02:58:49,855 - gmail_import - INFO - Starting Gmail import: looking back 1 days, max 10 emails
2025-03-17 02:58:49,855 - gmail_import - INFO - Using database: /Users/srvo/dewey_emails.duckdb
2025-03-17 02:58:49,920 - gmail_import - INFO - Using credentials from /Users/srvo/dewey/credentials.json
2025-03-17 02:58:49,921 - gmail_import - WARNING - Failed to load as service account credentials: Service account info was not in the expected format, missing fields token_uri, client_email.
2025-03-17 02:58:49,921 - gmail_import - INFO - Trying to load as OAuth credentials
2025-03-17 02:58:49,921 - gmail_import - ERROR - Failed to build Gmail service: Authorized user info was not in the expected format, missing fields client_secret, refresh_token, client_id.
2025-03-17 02:58:49,921 - gmail_import - ERROR - Gmail import failed: Authorized user info was not in the expected format, missing fields client_secret, refresh_token, client_id.
Traceback (most recent call last):
  File "/Users/srvo/dewey/src/dewey/core/crm/gmail/simple_import.py", line 129, in build_gmail_service
    credentials = service_account.Credentials.from_service_account_file(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/srvo/dewey/.venv/lib/python3.12/site-packages/google/oauth2/service_account.py", line 260, in from_service_account_file
    info, signer = _service_account_info.from_filename(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/srvo/dewey/.venv/lib/python3.12/site-packages/google/auth/_service_account_info.py", line 80, in from_filename
    return data, from_dict(data, require=require, use_rsa_signer=use_rsa_signer)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/srvo/dewey/.venv/lib/python3.12/site-packages/google/auth/_service_account_info.py", line 50, in from_dict
    raise exceptions.MalformedError(
google.auth.exceptions.MalformedError: Service account info was not in the expected format, missing fields token_uri, client_email.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/srvo/dewey/src/dewey/core/crm/gmail/simple_import.py", line 452, in main
    service = build_gmail_service(args.user)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/srvo/dewey/src/dewey/core/crm/gmail/simple_import.py", line 146, in build_gmail_service
    credentials = Credentials.from_authorized_user_file(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/srvo/dewey/.venv/lib/python3.12/site-packages/google/oauth2/credentials.py", line 517, in from_authorized_user_file
    return cls.from_authorized_user_info(data, scopes)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/srvo/dewey/.venv/lib/python3.12/site-packages/google/oauth2/credentials.py", line 464, in from_authorized_user_info
    raise ValueError(
ValueError: Authorized user info was not in the expected format, missing fields client_secret, refresh_token, client_id.
